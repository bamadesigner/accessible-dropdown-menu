(()=>{"use strict";class e{constructor(e,t){this.menu=e,this.classes={active:"acc-menu__item--active",expanded:"acc-menu__item--expanded"},this.focusSelectors=t||["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])",'iframe:not([tabindex^="-"])',"object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.init()}getFocusableElements(e){return e.querySelectorAll(this.focusSelectors.join(","))}isFirstFocusableElement(e,t){const n=this.getFocusableElements(t);return 0<n.length&&e===n[0]}isLastFocusableElement(e,t){const n=this.getFocusableElements(t);return 0<n.length&&e===n[n.length-1]}isRootMenuItem(e){return"true"===e.dataset.accMenuItemRoot}openMenuItem(e){this.isRootMenuItem(e)&&this.closeOpenMenuItems(this.menu),e.classList.add(this.classes.expanded);const t=e.querySelector("button[data-acc-menu-item-button]");if(!t)return;const n=t.dataset.expandedlabel,a=t.dataset.expandedtitle;n&&t.setAttribute("aria-label",n),a&&(t.title=a),t.ariaExpanded="true"}closeMenuItem(e,t=!0){e.classList.remove(this.classes.expanded);const n=e.querySelector("button[data-acc-menu-item-button]");n&&(n.dataset.defaultLabel&&n.setAttribute("aria-label",n.dataset.defaultLabel),n.dataset.defaultTitle&&(n.title=n.dataset.defaultTitle),n.ariaExpanded="false",t&&n.focus()),this.closeOpenMenuItems(e)}closeOpenMenuItems(e){e.querySelectorAll("."+this.classes.expanded).forEach((e=>{this.closeMenuItem(e,!1)}))}init(){let e=0;this.menu.querySelectorAll('[data-acc-menu-item-parent="true"]').forEach((t=>{try{const n=t.querySelector("button[data-acc-menu-item-button");if(!n)throw new Error("AccessibleMenu: Button not found for menu item with children.");const a=n.getAttribute("aria-controls");if(!a)throw new Error("AccessibleMenu: Button must have an aria-controls that points to the submenu.");const s=document.getElementById(a);if(!s)throw new Error("AccessibleMenu: Submenu not found for menu item with children.");n.dataset.defaultLabel=n.ariaLabel||void 0,n.dataset.defaultTitle=n.title,n.addEventListener("click",(()=>{"true"===n.ariaExpanded?this.closeMenuItem(t):this.openMenuItem(t)})),s.addEventListener("keydown",(e=>{if("Escape"===e.key)return e.stopPropagation(),void this.closeMenuItem(t);"Tab"===e.key&&document.activeElement&&(e.shiftKey?this.isFirstFocusableElement(document.activeElement,s)&&this.closeMenuItem(t,!1):this.isLastFocusableElement(document.activeElement,s)&&this.closeMenuItem(t,!1))})),t.classList.add(this.classes.active),e++}catch(e){console.error(e)}})),e&&(document.addEventListener("click",(()=>{this.closeOpenMenuItems(this.menu)})),this.menu.addEventListener("click",(e=>{e.stopPropagation()})))}}(()=>{try{((t="data-acc-menu")=>{document.querySelectorAll("["+t+"]").forEach((t=>{new e(t)}))})()}catch(e){console.error(e)}})()})();